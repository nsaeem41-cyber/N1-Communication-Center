<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N1 Pro - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ø§Ù„Ø´Ø§Ù…Ù„ ğŸ˜Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --n1-gold: #d4af37;
            --n1-dark: #1a1a1a;
            --n1-gray: #f8f9fa;
            --n1-white: #ffffff;
            --n1-success: #27ae60;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--n1-gray);
            margin: 0;
            padding: 0;
            color: var(--n1-dark);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ø±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø«Ù„Ø§Ø«Ø© */
        .n1-nav {
            background-color: var(--n1-dark);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            border-bottom: 3px solid var(--n1-gold);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .n1-nav a {
            color: var(--n1-gold);
            text-decoration: none;
            font-weight: bold;
            padding: 8px 15px;
            border: 1px solid var(--n1-gold);
            border-radius: 10px;
            font-size: 14px;
            transition: 0.3s;
        }

        .n1-nav a:hover, .n1-nav a.active {
            background-color: var(--n1-gold);
            color: var(--n1-dark);
        }

        .header-pro {
            background-color: var(--n1-dark);
            color: var(--n1-gold);
            padding: 40px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .main-content {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }

        .card-pro {
            background: var(--n1-white);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin-bottom: 25px;
        }

        .grid-pro {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .input-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: 12px;
            font-size: 16px;
            box-sizing: border-box;
            transition: 0.3s;
        }

        input:focus {
            border-color: var(--n1-gold);
            outline: none;
        }

        .btn-n1 {
            background-color: var(--n1-dark);
            color: var(--n1-gold);
            border: 2px solid var(--n1-gold);
            padding: 15px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: 0.3s;
        }

        .btn-n1:hover {
            background-color: var(--n1-gold);
            color: var(--n1-dark);
        }

        .stats-grid {
            display: flex;
            justify-content: space-around;
            background: var(--n1-dark);
            color: var(--n1-gold);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .stat-item h4 { margin: 0; font-size: 14px; opacity: 0.8; }
        .stat-item p { margin: 5px 0 0; font-size: 24px; font-weight: bold; }

        #statusBox {
            margin-top: 15px;
            padding: 15px;
            border-radius: 12px;
            display: none;
            text-align: center;
            font-weight: bold;
        }

        .search-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #searchResults {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .result-card {
            background: #f9f9f9;
            padding: 10px;
            border-right: 4px solid var(--n1-gold);
            margin-bottom: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<nav class="n1-nav">
    <a href="index.html">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ğŸ˜Š</a>
    <a href="company_dashboard.html">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ğŸ˜Š</a>
    <a href="n1_pro.html" class="active">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Pro ğŸ˜Š</a>
</nav>

<div class="header-pro">
    <h1>Ù†Ø¸Ø§Ù… N1 - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ğŸ˜Š</h1>
    <p>ÙƒÙ„ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¬Ø³Ø± ÙˆØ§Ø­Ø¯ ÙˆØ¬Ø¯ÙˆÙ„ Ø¥ÙƒØ³Ù„ Ø£ØµÙ„ÙŠ</p>
</div>

<div class="main-content">
    
    <div class="card-pro">
        <label>Ø§Ø®ØªÙŠØ§Ø± Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø±ÙƒØ© (Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ÙŠØ© Ø§Ù„ØªØ§Ù…Ø©) ğŸ˜Š</label>
        <select id="companySelect">
            <option value="qzfkwfzcpbrsm">N1 - Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</option>
            <option value="new_bridge_2">Ø­Ø³Ø§Ø¨ Ø´Ø±ÙƒØ© Ø¬Ø¯ÙŠØ¯Ø© (Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯)</option>
        </select>
    </div>

    <div class="card-pro">
        <h3>Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ˜Š</h3>
        <div class="search-section">
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ...">
            <button class="btn-n1" style="width: 120px; padding: 10px;" onclick="searchInCloud()">Ø¨Ø­Ø«</button>
        </div>
        <div id="searchResults"></div>
    </div>

    <div class="grid-pro">
        <div class="card-pro">
            <h3>ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸ˜Š</h3>
            <form id="proForm">
                <div class="input-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</label>
                    <input type="text" name="name" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>
                <div class="input-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    <input type="text" name="phone" required placeholder="07XXXXXXXX">
                </div>
                <div class="input-group">
                    <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ø§Ù„Ù…ÙˆÙ‚Ø¹)</label>
                    <select name="location">
                        <option value="Ø¹Ù…Ø§Ù†">Ø¹Ù…Ø§Ù†</option>
                        <option value="Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡">Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡</option>
                        <option value="Ø¥Ø±Ø¨Ø¯">Ø¥Ø±Ø¨Ø¯</option>
                        <option value="Ø§Ù„Ù…ÙØ±Ù‚">Ø§Ù„Ù…ÙØ±Ù‚</option>
                    </select>
                </div>
                <div style="display: flex; gap: 15px;">
                    <div class="input-group" style="flex: 1;">
                        <label>Ø§Ù„Ø£Ø¬Ø±Ø©</label>
                        <input type="number" name="delivery" required step="0.01">
                    </div>
                    <div class="input-group" style="flex: 1;">
                        <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙƒÙ„ÙŠ</label>
                        <input type="number" name="price" required step="0.01">
                    </div>
                </div>
                <div class="input-group">
                    <label>Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
                    <select name="status">
                        <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„">Ù‚ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„ ğŸšš</option>
                        <option value="ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… âœ…</option>
                        <option value="Ù…Ù„ØºÙŠ">Ù…Ù„ØºÙŠ âŒ</option>
                    </select>
                </div>
                <button type="submit" class="btn-n1" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥ÙƒØ³Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ ğŸ˜Š</button>
            </form>
            <div id="statusBox"></div>
        </div>

        <div class="card-pro">
            <h3>Ø¬Ø±Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬ ğŸ˜Š</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h4>
                    <p id="totalCount">0</p>
                </div>
                <div class="stat-item">
                    <h4>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£Ø¬ÙˆØ±</h4>
                    <p id="totalMoney">0.00</p>
                </div>
            </div>
            <canvas id="n1Chart" style="max-height: 250px;"></canvas>
            <div style="margin-top: 20px; text-align: center;">
                <p style="font-size: 13px; color: #666;">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù† ØªÙØ­ÙØ¸ ÙÙŠ Ù…Ù„Ù: <br><strong>N One Database</strong></p>
            </div>
        </div>
    </div>
</div>

<script>
    const API_BASE = 'https://sheetdb.io/api/v1/qzfkwfzcpbrsm';
    const form = document.getElementById('proForm');
    const statusBox = document.getElementById('statusBox');
    
    let ordersCount = 0;
    let totalCash = 0;

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
    const ctx = document.getElementById('n1Chart').getContext('2d');
    const n1Chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Ø¹Ù…Ø§Ù†', 'Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡', 'Ø¥Ø±Ø¨Ø¯', 'Ø§Ù„Ù…ÙØ±Ù‚'],
            datasets: [{
                label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©',
                data: [0, 0, 0, 0],
                backgroundColor: '#d4af37',
                borderRadius: 8
            }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.innerText = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ... ğŸ˜Š';

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ‚Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        data.timestamp = new Date().toLocaleString('ar-EG');
        data.date = new Date().toLocaleDateString('ar-EG');
        data.id = 'N1-' + Math.floor(Math.random() * 10000);

        try {
            const response = await fetch(API_BASE, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ data: [data] })
            });

            if(response.ok) {
                statusBox.style.display = 'block';
                statusBox.style.background = '#d4edda';
                statusBox.style.color = '#155724';
                statusBox.innerText = 'ØªÙ… Ø§Ù„ØªØ®Ø²ÙŠÙ† ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ØµÙ„ÙŠ Ø¨Ù†Ø¬Ø§Ø­ ğŸ˜Š';
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø¬Ø±Ø§Ù
                ordersCount++;
                totalCash += parseFloat(data.delivery);
                document.getElementById('totalCount').innerText = ordersCount;
                document.getElementById('totalMoney').innerText = totalCash.toFixed(2);
                
                const locIndex = n1Chart.data.labels.indexOf(data.location);
                if(locIndex !== -1) {
                    n1Chart.data.datasets[0].data[locIndex]++;
                    n1Chart.update();
                }

                form.reset();
                setTimeout(() => { statusBox.style.display = 'none'; }, 4000);
            }
        } catch (error) {
            statusBox.style.display = 'block';
            statusBox.style.background = '#f8d7da';
            statusBox.innerText = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¬Ø³Ø±.. Ø·Ù…Ù†ÙŠ Ø®Ø§Ù„ØªÙˆ Ù…ÙŠÙ…ÙŠ ğŸ˜Š';
        } finally {
            btn.disabled = false;
            btn.innerText = 'Ø¥Ø±Ø³Ø§Ù„ Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥ÙƒØ³Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ ğŸ˜Š';
        }
    });

    async function searchInCloud() {
        const query = document.getElementById('searchInput').value;
        const resultsArea = document.getElementById('searchResults');
        if(!query) return;
        
        resultsArea.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«... ğŸ˜Š';
        try {
            const res = await fetch(`${API_BASE}/search?name=${query}`);
            const results = await res.json();
            resultsArea.innerHTML = '';
            if(results.length > 0) {
                results.forEach(item => {
                    resultsArea.innerHTML += `
                        <div class="result-card">
                            <strong>${item.name}</strong> - ${item.location}<br>
                            Ø§Ù„Ø­Ø§Ù„Ø©: ${item.status} | Ø§Ù„ØªØ§Ø±ÙŠØ®: ${item.date}
                        </div>`;
                });
            } else { resultsArea.innerHTML = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ ğŸ˜Š'; }
        } catch (e) { resultsArea.innerHTML = 'Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ ğŸ˜Š'; }
    }
</script>

</body>
</html>
