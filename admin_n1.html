<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N1 Pro - Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·Ù„Ù‚ ğŸ˜Š</title>
    <style>
        :root { --gold: #d4af37; --dark: #1a1a1a; --white: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: #f4f4f4; margin: 0; padding: 0; text-align: center; }
        .nav-top { background: var(--dark); padding: 15px; border-bottom: 3px solid var(--gold); display: flex; justify-content: space-around; }
        .nav-top a { color: var(--gold); text-decoration: none; font-weight: bold; border: 1px solid var(--gold); padding: 5px 10px; border-radius: 8px; }
        .header { background: var(--dark); color: var(--gold); padding: 25px; }
        .container { max-width: 800px; margin: 20px auto; padding: 15px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .btn-main { background: var(--dark); color: var(--gold); border: 2px solid var(--gold); padding: 12px; border-radius: 10px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 10px; }
        .table-res { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .table-res th { background: #3498db; color: white; padding: 10px; }
        .table-res td { border: 1px solid #eee; padding: 10px; background: white; }
        .btn-edit { background: #f39c12; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin: 2px; }
        .btn-delete { background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin: 2px; }
        #status { display: none; padding: 10px; border-radius: 8px; margin: 10px; font-weight: bold; }
        .logout-btn { background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div class="nav-top">
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </a>
    <a href="company_dashboard.html">Ø§Ù„Ø¬Ø±Ø¯ ğŸ“Š</a>
    <a href="n1_pro.html" style="background: var(--gold); color: var(--dark);">Ø§Ù„ØªØ­ÙƒÙ… âœ¨</a>
</div>

<div class="header">
    <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø­Ø¨Ø© Ø§Ù„Ø³ÙƒØ± ğŸ˜Š</h1>
    <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ØŒ ÙˆØ§Ù„Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</p>
</div>

<div class="container">
    <div class="card">
        <h3>Ø¨Ø­Ø« ÙˆØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ˜Š</h3>
        <input type="text" id="searchName" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ù„Ù„Ø¨Ø­Ø«..." style="width: 70%; padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
        <button onclick="loadData()" class="btn-main" style="width: 25%; display: inline-block;">Ø¨Ø­Ø« ğŸ”</button>
        <div id="status"></div>
        
        <table class="table-res">
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
                    <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody id="resultBody">
                </tbody>
        </table>
    </div>
    
    <button class="logout-btn" onclick="logout()">Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø¸Ø§Ù… ğŸ”’</button>
</div>

<script>
    const API = 'https://sheetdb.io/api/v1/qzfkwfzcpbrsm';

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ğŸ˜Š
    async function loadData() {
        const query = document.getElementById('searchName').value;
        const body = document.getElementById('resultBody');
        body.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª... ğŸ˜Š';

        try {
            const res = await fetch(API);
            const data = await res.json();
            body.innerHTML = '';

            const filtered = data.filter(item => item.name.includes(query));
            filtered.forEach(item => {
                body.innerHTML += `
                    <tr>
                        <td>${item.location} (${item.name})</td>
                        <td>
                            <button class="btn-edit" onclick="editOrder('${item.name}')">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn-delete" onclick="deleteOrder('${item.name}')">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `;
            });
        } catch (e) { alert('ÙÙŠ Ù…Ø´ÙƒÙ„Ø© Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ ÙŠØ§ Ø¨Ø·Ø© ğŸ˜Š'); }
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø­Ø°Ù Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ğŸ˜Š
    async function deleteOrder(name) {
        if(confirm(`Ø¨Ø¯Ùƒ ØªØ­Ø°ÙÙŠ Ø·Ù„Ø¨ ${name} Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ ğŸ˜ŠØŸ`)) {
            const status = document.getElementById('status');
            status.style.display = 'block'; status.innerText = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø³Ø­Ø§Ø¨Ø©...';
            
            try {
                await fetch(`${API}/name/${name}`, { method: 'DELETE' });
                status.style.background = '#d4edda'; status.innerText = 'ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­ ğŸ˜Š';
                loadData(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            } catch (e) { alert('Ø§Ù„Ù…Ø´Ø§ÙƒØ³Ø© Ù…Ù†Ø¹Øª Ø§Ù„Ø­Ø°Ù! ğŸ˜Š'); }
        }
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ğŸ˜Š
    async function editOrder(name) {
        const newLoc = prompt(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù€ ${name}:`);
        if(newLoc) {
            await fetch(`${API}/name/${name}`, {
                method: 'PATCH',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({data: {location: newLoc}})
            });
            alert('ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙƒÙ„ Ø±Ù‚ÙŠ ğŸ˜Š');
            loadData();
        }
    }

    function logout() {
        if(confirm('Ø¨Ø¯Ùƒ ØªØ³ÙƒØ±ÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ§ ØºØ§Ù„ÙŠØ© ğŸ˜ŠØŸ')) {
            document.body.innerHTML = '<h1>ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¨Ù†Ø¬Ø§Ø­ ğŸ˜Š Ù†Ø±Ø§ÙƒÙ Ù„Ø§Ø­Ù‚Ø§Ù‹ ÙŠØ§ Ø­Ø¨Ø© Ø§Ù„Ø³ÙƒØ±</h1>';
        }
    }
</script>
</body>
</html>
